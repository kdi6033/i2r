# i2r
ì•„ì´í‹°ì•Œì—ì„œ ì œì‘í•œ ê¸°ê¸° ê´€ë ¨ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.    
Data Scientist, AI Scientist ë¥¼ í¬ë§í•˜ì‹œëŠ” ë¶„ë“¤ì—ê²Œ ë„ì›€ì„ ë“œë¦¬ë ¤ í•©ë‹ˆë‹¤.    
<br>
Node-REDë¥¼ í™œìš©í•˜ì—¬ ë¡œì»¬ ì»´í“¨í„°, AWS í´ë¼ìš°ë“œ, ìŠ¤ë§ˆíŠ¸í° ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ i2r-02, i2r-03, i2r-04 ê¸°ê¸°ì˜ ëª¨ë‹ˆí„°ë§ ë° ì œì–´ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤.

### ì£¼ìš” ê¸°ëŠ¥   
- Node-RED ê¸°ë°˜ ëª¨ë‹ˆí„°ë§ ë° ì œì–´: ë‹¤ì–‘í•œ í™˜ê²½ì—ì„œ i2r ê¸°ê¸°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ê³  ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.    
- ë¡œì»¬ ì»´í“¨í„°: ë¡œì»¬ ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ ê¸°ê¸°ë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê³  ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.    
- AWS í´ë¼ìš°ë“œ: í´ë¼ìš°ë“œ ê¸°ë°˜ìœ¼ë¡œ ì›ê²©ì§€ì—ì„œë„ ê¸°ê¸°ì˜ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê³  ì œì–´ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.     
- ìŠ¤ë§ˆíŠ¸í° ì• í”Œë¦¬ì¼€ì´ì…˜: ëª¨ë°”ì¼ ì•±ì„ í†µí•´ ì–¸ì œ ì–´ë””ì„œë‚˜ ê¸°ê¸°ì˜ ìƒíƒœë¥¼ í™•ì¸í•˜ê³  ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ê¸°ê¸° ì •ë³´   
ë§í¬ë¥¼ ëˆ„ë¥´ë©´ ê¸°ê¸° ì„¤ëª… ì‚¬ì´íŠ¸ë¡œ ì´ë™ í•©ë‹ˆë‹¤.    
- [i2r-01](https://github.com/kdi6033/i2r-01/tree/main/0%20Android%20App%20Program/server-i2r-01): ë¸”ë£¨íˆ¬ìŠ¤, mqtt, RS485, RS232 ì¸í„°ë„·í†µì‹ ì„ ì„œë¡œ ì—°ê²°í•©ë‹ˆë‹¤.    
- [i2r-02](https://github.com/kdi6033/i2r-02/tree/main/0%20Source-Program-IoT/board-i2r-02): ì…ì¶œë ¥ ê°4ì±„ë„ì˜ ì…ì¶œë ¥ ì œì–´í•˜ëŠ” IoT PLC     
- [i2r-03](https://github.com/kdi6033/i2r-03/tree/main/0%20Source-Program-IoT/board-i2r-03) : ì…ì¶œë ¥ ê°4ì±„ë„ì˜ ì…ì¶œë ¥ ì œì–´í•˜ëŠ” IoT PLC, ì˜¨ìŠµë„ ì„¼ì„œ     
- [i2r-04](https://github.com/kdi6033/i2r-04/tree/main/0%20Source-Program-IoT/board-i2r-04) : ì…ì¶œë ¥ ê°2ì±„ë„ì˜ ì…ì¶œë ¥ ì œì–´í•˜ëŠ” IoT PLC, 2ê°œì˜ ì•„ë‚˜ë¡œê·¸ ì…ë ¥    

### ì‚¬ìš© ë°©ë²•    
- ìŠ¤ë§ˆíŠ¸í° ë˜ëŠ” íƒ­ìœ¼ë¡œ ì œì–´ : ì–´í”Œì„¤ì¹˜    
- PC IoT ì„œë²„  
- ì•„ë§ˆì¡´ í¬ë¼ìš°ë“œ AWS IoT ì„œë²„
- ìì„¸í•œ ì‚¬ìš©ë²•ê³¼ ì„œë²„ êµ¬ì¶•ì˜ ì„¸ë¶€ë‚´ìš©ì€ ì•„ë˜ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”

### ìŠ¤ë§ˆíŠ¸í° ë˜ëŠ” íƒ­ìœ¼ë¡œ ì œì–´
ë‹¤ìŒ QR ë§í¬ë¥¼ ëˆŒëŸ¬ ì–´í”Œì„ ì„¤ì¹˜í•˜ê³  ìœ íŠœë¸Œì˜ ì‚¬ìš©ë²•ì„ ë”°ë¼í•˜ì„¸ìš”.    
QR CODE ì—°ê²°í•˜ê±°ë‚˜ ê·¸ë¦¼ì„ ëˆ„ë¥´ì„¸ìš” <br>   

<a href="https://play.google.com/store/apps/details?id=io.ionic.i2rReactIoT">
    <img src="https://github.com/user-attachments/assets/6fcca369-0c4a-4d6f-ad9b-642c6d29bdac" alt="ë‹¤ìš´ë¡œë“œ QRì½”ë“œ" width="200">
</a>  
<a href="https://youtu.be/bLvpejVkJcQ">
    <img src="https://github.com/user-attachments/assets/9523bd58-8626-4707-af54-0d5fd12a8c82" alt="IoT PLC App í†µì‹  ì„¤ì •" width="400">
</a>
<a href="https://youtu.be/-O2wFqJ9-Qw">
    <img src="https://github.com/user-attachments/assets/4b88edef-1c0a-4c19-bd82-464cf4cacede" alt="ì…ì¶œë ¥, ì˜¨ë„, ìŠµë„ ë™ì‘ì„¤ì •" width="400">
</a>    
    
êµ¬ë§¤í•˜ì‹  ë³´ë“œì—ëŠ” ë‹¤ìŒ í”„ë¡œê·¸ë¨ì´ ì„¤ì¹˜ë˜ì–´ ìˆìŠµìŠµë‹ˆë‹¤. ì–´í”Œê³¼ ì—°ë™í•˜ëŠ” ì•„ë‘ì´ë…¸ í”„ë¡œê·¸ë¨ìœ¼ë¡œ ì‘ìš©í•´ì„œ ì‚¬ìš©í•˜ì‹¤ ë¶„ë“¤ì€ ì´ í”„ë¡œê·¸ë¨ì„ í™œìš©í•˜ì„¸ìš”. <br>

[i2r-02 ë³´ë“œ ì•„ë‘ì´ë…¸ ì†ŒìŠ¤í”„ë¡œê·¸ë¨](https://github.com/kdi6033/i2r-02/releases/tag/board-i2r-02-v1.0)    
[i2r-03 ë³´ë“œ ì•„ë‘ì´ë…¸ ì†ŒìŠ¤í”„ë¡œê·¸ë¨](https://github.com/kdi6033/i2r-03/releases/tag/board-i2r-03-v1.0)    
[i2r-04 ë³´ë“œ ì•„ë‘ì´ë…¸ ì†ŒìŠ¤í”„ë¡œê·¸ë¨](https://github.com/kdi6033/i2r-04/releases/tag/board-i2r-04-v1.0)    


# í”„ë¡œí† ì½œ
i2r ë³´ë“œì˜ mqtt í†µì‹ ì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì´ êµ¬ì„±ë˜ì–´ emailì„ ì €ì¥í•˜ë©´ ë‹¤ìŒ í† í”½ìœ¼ë¡œ ìì‹ ì— í•´ë‹¹ë˜ëŠ” ë°ì´í„°ë¥¼ í†µì‹  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.     
intopic : i2r/emailì£¼ì†Œ/in    
outtopic=i2r/emailì£¼ì†Œ/out  

# ğŸ“¡ i2r MQTT í†µì‹  ëª…ë ¹ì–´ ì‚¬ì „ (ì¶•ì•½í˜•)

ì´ ë¬¸ì„œëŠ” i2r IoT ë³´ë“œì™€ í´ë¼ì´ì–¸íŠ¸ ê°„ MQTT í†µì‹  ì‹œ ì‚¬ìš©í•˜ëŠ” JSON ê¸°ë°˜ ëª…ë ¹ì–´ í”„ë¡œí† ì½œì„ ì„¤ëª…í•©ë‹ˆë‹¤.  
ëª¨ë“  ë©”ì‹œì§€ëŠ” ê²½ëŸ‰í™”ë¥¼ ìœ„í•´ **ì¶•ì•½ëœ í•„ë“œëª…**ê³¼ **ì¶•ì•½ëœ ëª…ë ¹ì–´ ì½”ë“œ(`c`)**ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

---

## âœ… ê¸°ë³¸ MQTT í† í”½ êµ¬ì¡°

- **intopic**  : `i2r/{email}/in`  
- **outtopic** : `i2r/{email}/out`

> `email`ì€ ê° ì‚¬ìš©ìì˜ ê³ ìœ  ID ì—­í• ì„ í•©ë‹ˆë‹¤.

---

## âœ… JSON ë©”ì‹œì§€ í•„ë“œëª… ìš”ì•½

| ì¶•ì•½ í•„ë“œ | ì „ì²´ ëª…ì¹­ | ì„¤ëª… |
|-----------|-----------|------|
| `c`       | command   | ëª…ë ¹ ì¢…ë¥˜ (ì•„ë˜ ì°¸ì¡°) |
| `m`       | mac       | ëŒ€ìƒ ì¥ì¹˜ì˜ MAC ì£¼ì†Œ |
| `n`       | no        | í•€ ë²ˆí˜¸ (0~3) |
| `v`       | value     | ê°’ (true/false ë˜ëŠ” ìˆ«ì) |
| `o`       | operation | ì‘ì—… ì¢…ë¥˜: `save`, `list`, `delete`, 'deleteAll' `cali`, 'insert' ë“± |
| `ps`      | portState | ì—°ë™í•  ì¶œë ¥ í¬íŠ¸ ì •ë³´ ë°°ì—´ |
| `gs/type` | type      | ë³´ë“œí˜•íƒœ 3:i2r-03, 4:i2r-04 |
| `bs/type` | type      | ì„¼ì„œ ìœ í˜• `temp`:ì˜¨ë„, `humi`:ìŠµë„, `light`:ì¡°ë„ |
| `in`      | in port   | ì…ë ¥í¬íŠ¸ |
| `out`     | out port  | ì¶œë ¥í¬íŠ¸ |
| `pi`      | pin index  | ì¶œë ¥í•€ ë²ˆí˜¸ 0ë²ˆë¶€í„° ì‹œì‘í•œë‹¤. |
| `rm`      | repeat mode  | ë°˜ë³µ ì£¼ê¸° "daily"="d", "weekly"="w" |
| `dw`      | day of week  | ì¼ì£¼ì¼ ì¤‘ ìš”ì¼ì„¤ì • ì¼=0,ì›”=1,í™”=2,ìˆ˜=3,ëª©=4,ê¸ˆ=5,í† =6 |
| `temp`    | temperature | ì˜¨ë„  |
| `humi`    | humidity  | ìŠµë„    |
| `light`   | light     | ì¡°ë„    |

---

## âœ… ëª…ë ¹ì–´ ì¶•ì•½ ì½”ë“œ ëª©ë¡

| Full Command Name  | ì¶•ì•½ ì½”ë“œ (`c`) | ì„¤ëª… |
|---------------------|------------------|------|
| `download_firmware` | `df`             | ë³´ë“œì— íŒì›¨ì–´ë¥¼ ë‹¤ìš´ë¡œë“œ <br>ê¸°ëŠ¥: ì¸í„°ë„·ì—ì„œ ë§¥ì–´ë“œë ˆìŠ¤ê°€ "D8:13:2A:C3:E7:68"ì¸ ë³´ë“œë¡œ íŒì›¨ì–´ë¥¼ ë‹¤ìš´ë¡œë“œ <br>{"c": "df","m": "D8:13:2A:C3:E7:68","fileName": "i2r-03.ino.bin"} |
| `set_info`          | `si`             | Wi-Fi, MQTT ë¸Œë¡œì»¤ ë“± ì„¤ì • ì •ë³´ ì „ì†¡ <br>ê¸°ëŠ¥: Wi-Fi ë° MQTT ì„¤ì • ì •ë³´ ë“±ë¡ <br> {"c": "si","ssid": "i2r_wifi","password": "00000000","email": "user@example.com","mqttBroker": "mqtt.i2r.link"} |
| `set_output`        | `so`             | ì¶œë ¥ í•€ì„ ON/OFF ì œì–´ (true = ON, false = OFF) <br>ê¸°ëŠ¥: 1ë²ˆí•€ on  <br> {"c": "so","m": "A0:B7:65:CD:4D:34","n": 1,"v": true}|
| `get_status`        | `gs`             | ë³´ë“œ ìƒíƒœ ìš”ì²­ (ì˜¨ë„, ìŠµë„, in/out ë“±) <br> ê¸°ëŠ¥: ê¸°ê¸°ì˜ í˜„ì¬ ìƒíƒœ ìš”ì²­ {"c": "gs","m": "EC:64:C9:43:E8:B8"} <br> ì‘ë‹µ ì˜ˆì‹œ: {"type": 3,"email": "kdi6033@gmail.com","m": "EC:64:C9:43:E8:B8","temp": 28.4,"humi": 38,"in": [0, 0, 0, 0],"out": [0, 0, 0, 0]} |
| `schedule_output`   | `sch`            | ì‹œê°„ ê¸°ë°˜ ì¶œë ¥ ë™ì‘ ìŠ¤ì¼€ì¤„ ì„¤ì • <br> ê¸°ëŠ¥: ì¶œë ¥í•€ ì‹œê°„ ìŠ¤ì¼€ì¤„ ì„¤ì • {"c": "sch","m": "A0:B7:65:CD:4D:34","o": "save","n": 0,"sH": 9,sM": 0, "eH": 10, "eM": 0,"rM": "d", "dW": 0 } | 
| `bind_input_output` | `bio`            | ì…ë ¥ ìƒíƒœì— ë”°ë¼ ì¶œë ¥ ì—°ë™ ì„¤ì • <br> ê¸°ëŠ¥: ì…ë ¥ ìƒíƒœì— ë”°ë¼ ì¶œë ¥ ì œì–´ {"c": "bio","o": "save","m": "A0:B7:65:CD:4D:34","n": 0,"ps": [{ "m": "D4:8A:FC:B5:30:10", "n": 1, "v": true },{ "m": "B0:A7:32:1D:B3:B8", "n": 1, "v": false } ]} |
| `bind_sensor`       | `bs`             | ì„¼ì„œ ì¡°ê±´ì— ë”°ë¼ ì¶œë ¥ ì œì–´ (ì˜¨ë„, ìŠµë„, ì¡°ë„ ë“±) <br> {"c": "bs","m": "A0:B7:65:CD:4D:34","o": "save","type":"temp","tempHigh": 28,"tempLow": 27,"ps": [{ "m": "D4:8A:FC:B5:30:10", "n": 0, "v": true }]} |
| `touchPanel_input`      | `ti`            | Touch Panel(RP2040 ë“±) ì „ë‹¬ |

---


| command              | ê¸°ëŠ¥                       | ì„¤ëª… ë° ì˜ˆì‹œ                                                                                                                                                                                                                                                                                                    |
| -------------------- | ------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `download_firmware`  | íŒì›¨ì–´ ë‹¤ìš´ë¡œë“œ                 | ì¸í„°ë„·ì—ì„œ ë³´ë“œë¡œ íŒì›¨ì–´ë¥¼ ë‚´ë ¤ë°›ìŒ  <br>`json { "mac":"D8:13:2A:C3:E7:68", "command":"download_firmware", "fileName":"i2r-03.ino.bin" } `                                                                                                                                                                                 |
| `set_info`           | ì •ë³´ ì…ë ¥ (Wi-Fi, MQTT ë“± ì„¤ì •) | ë³´ë“œì— í†µì‹ ì •ë³´ë¥¼ ì €ì¥í•¨ <br>`json { "command":"set_info", "ssid":"***", "password":"***", "email":"***", "mqttBroker":"ai.doowon.ac.kr" } `                                                                                                                                                                          |
| `set_output`         | í•€ ì¶œë ¥ ì œì–´                  | ì§€ì •ëœ í•€ì— true/false ì¶œë ¥ <br>`json { "mac":"A0:B7:65:CD:4D:34", "command":"set_output", "no":1, "value":true } `                                                                                                                                                                                               |
| `get_status`         | ìƒíƒœ ìš”ì²­                    | í˜„ì¬ ìƒíƒœë¥¼ ìš”ì²­í•¨ <br>ìš”ì²­: `json { "mac":"EC:64:C9:43:E8:B8", "command":"get_status" } `<br>ì‘ë‹µ: `json { "type":3, "email":"kdi6033@gmail.com", "mac":"EC:64:C9:43:E8:B8", "temp":28.4, "humi":38, "in":[0,0,0,0], "out":[0,0,0,0] } `                                                                              |
| `schedule_output`    | ë™ì‘ì‹œê°„ ì„¤ì •                  | ì¶œë ¥í•€ì— ì‹œê°„ ì˜ˆì•½ ì œì–´ <br>`json { "command":"schedule_output", "mac":"A0:B7:65:CD:4D:34", "oper":"insert", "pI":0, "sH":9, "sM":55, "eH":9, "eM":57, "rM":"d", "dW":0 } `<br>`oper`: `"insert"`, `"list"`, `"delete"`, `"deleteAll"`                                                                               |
| `bind_input_output`  | ì…ë ¥ì— ë”°ë¥¸ ì¶œë ¥ ì—°ë™             | ì…ë ¥í•€ì— ë”°ë¼ ë‹¤ë¥¸ ê¸°ê¸°ì˜ ì¶œë ¥ì„ ì œì–´í•¨ <br>`json { "command":"bind_input_output", "oper":"save", "mac":"A0:B7:65:CD:4D:34", "portNo":0, "portState":[{"mac":"D4:8A:FC:B5:30:10","port":1,"value":false}] } `<br>`oper`: `"save"`, `"list"`, `"delete"`                                                                     |
| `bind_temp_output`   | ì˜¨ë„ë³€í™”ì— ë”°ë¥¸ ì¶œë ¥ ì„¤ì •           | ì˜¨ë„ ì¡°ê±´ì— ë”°ë¼ ì¶œë ¥ ì œì–´ <br>`json { "command":"bind_temp_output", "oper":"save", "mac":"A0:B7:65:CD:4D:34", "tempHigh":28, "tempLow":27, "portState":[{"mac":"D4:8A:FC:B5:30:10","port":0,"value":true}] } `<br>`json { "command":"bind_temp_output", "oper":"cali", "mac":"A0:B7:65:CD:4D:34", "calTemp":28.1 } ` |
| `bind_humi_output`   | ìŠµë„ë³€í™”ì— ë”°ë¥¸ ì¶œë ¥ ì„¤ì •           | ìŠµë„ ì¡°ê±´ì— ë”°ë¼ ì¶œë ¥ ì œì–´ <br>`json { "command":"bind_humi_output", "oper":"save", "mac":"A0:B7:65:CD:4D:34", "humiHigh":50, "humiLow":49, "portState":[{"mac":"D4:8A:FC:B5:30:10","port":0,"value":true}] } `<br>`json { "command":"bind_humi_output", "oper":"cali", "mac":"A0:B7:65:CD:4D:34", "calHumi":48 } `   |
| `bind_sensor_output` | ì„¼ì„œ ìƒíƒœ ê¸°ë°˜ ì¶œë ¥ ì„¤ì • (í†µí•©)      | ì˜¨ë„/ìŠµë„/ì¡°ë„ ë“± ë³µí•© ì„¼ì„œê¸°ë°˜ ì¶œë ¥ <br> â†’ ì˜¨ë„/ìŠµë„ í¬ë§·ê³¼ ë™ì¼, `command`ëŠ” `"bind_sensor_output"` ì‚¬ìš©                                                                                                                                                                                                                            |
| `sensor_input`       | ì™¸ë¶€ ì„¼ì„œ ì…ë ¥ ì°¸ì¡°ê°’             | ì™¸ë¶€ ì¥ì¹˜(RP2040 ë“±)ì—ì„œ ì¸¡ì •í•œ ì„¼ì„œê°’ì„ ì „ë‹¬ <br>`json { "command":"sensor_input", "light":120 } `                                                                                                                                                                                                                        |


|order|  ê¸°ëŠ¥  |ì„¤ëª… ë° í”„ë¡œí† ì½œ|
|--|-------|---|
|0|íŒì›¨ì–´ ë‹¤ìš´ë¡œë“œ|ì¸í„°ë„·ì—ì„œ í†µì‹ ìœ¼ë¡œ íŒì›¨ì–´ë¥¼ ë³´ë“œë¡œ ë‚´ë ¤ ë°›ëŠ”ë‹¤<br> {"mac":"D8:13:2A:C3:E7:68","order":0,"fileName":"i2r-03.ino.bin"}|
|1|ì •ë³´ì…ë ¥|ì™€ì´íŒŒì´ ë° í†µì‹ ì— í•„ìš”í•œ ì •ë³´ë¥¼ ë³´ë‚´ ë³´ë“œì— ê¸°ë¡í•˜ì—¬ ê¸°ê¸°ëŠ” ì—¬ê¸° ì •ë³´ë¡œ í†µì‹ ì„ ì—°ê²°í•œë‹¤.<br> {"order":1,'ssid':'***','password'='***', 'email':'***', 'mqttBroker':'ai.doowon.ac.kr'}|
|2|í•€ì¶œë ¥| IoT PLCì˜ í•€ë²ˆí˜¸(0,1,2,3 4ê°œ)ì™€ true/falseë¥¼ ë³´ë‚´ë©´ ë¦´ë ˆì´ê°€ ë™ì‘í•œë‹¤. <br>{"mac":"A0:B7:65:CD:4D:34","order":2,"no":1,"value":true}<blockquote>ë§¥ì–´ë“œë ˆìŠ¤ê°€ "A0:B7:65:CD:4D:34"ì¸ ê¸°ê¸°ì˜ 1ë²ˆí•€ ë¦´ë ˆì´ë¥¼ on ì‹œí‚¨ë‹¤.</blockquote> |
|3|ìƒíƒœì „ì†¡ìš”ì²­|ë³´ë“œì˜ í˜„ì¬ ìƒíƒœë¥¼ mqttë¡œ ë³´ë‚¸ë‹¤.<br>ìš”ì²­ : {"mac":"EC:64:C9:43:E8:B8",'order':3}<blockquote> ë§¥ì–´ë“œë ˆìŠ¤ê°€ "EC:64:C9:43:E8:B8"ì¸ ê¸°ê¸°ì˜ í˜„ì¬ ìƒíƒœë¥¼ ë³´ë‚´ì˜¨ë‹¤. </blockquote> ì‘ë‹µì˜ˆì‹œ  <br>{"type":3,"email":"kdi6033@gmail.com","mac":"EC:64:C9:43:E8:B8","temp":28.4,"humi":38,"in":[0,0,0,0],"out":[0,0,0,0]}|
|4|ë™ì‘ì‹œê°„ì„¤ì • | ë³´ë“œì˜ ë™ì‘ì‹œê°„ì„ ì¼ì¼ ì¼ì£¼ì¼ ë‹¨ìœ„ë¡œ ì„¤ì •í•œë‹¤. <br>{'order':4,"oper":operation,"pI":pinIndex,"sH":ì‹œì‘ì‹œê°„,"sM":ì‹œì‘ë¶„,"eH":ì¢…ë£Œì‹œê°„,"eM":ì¢…ë£Œë¶„, "rM":repeatMode,"dW":dayOfWeek}<br>pI:pinIndex ì¶œë ¥í•€ ë²ˆí˜¸ 0ë²ˆë¶€í„° ì‹œì‘í•œë‹¤.<br> operation : "insert":ì„¤ì •ì„ ì¶”ê°€í•œë‹¤. "delete":í•œê°œì˜ ì„¤ì •ì„ ì‚­ì œí•œë‹¤. "deleteAll":ëª¨ë‘ ì‚­ì œí•œë‹¤.<br>repeatMode : "daily"="d", "weekly"="w"<br>dayOfWeek : ì¼ì£¼ì¼ ì¤‘ ìš”ì¼ì„¤ì • ì¼=0,ì›”=1,í™”=2,ìˆ˜=3,ëª©=4,ê¸ˆ=5,í† =6<br>ì˜ˆì œ<br>{"order":4,"mac":"A0:B7:65:CD:4D:34","oper":"insert","pI":0,"sH":9,"sM":55,"eH":9,"eM":57,"rM":"d","dW":0}<blockquote>ì˜¤ì „9ì‹œ55ë¶„ë¶€í„° 9ì‹œ57ë¶„ê¹Œì§€ ë§¤ì¼ ë™ì‘í•œë‹¤.</blockquote>{"order":4,"mac":"A0:B7:65:CD:4D:34","oper":"insert","pI":0,"sH":9,"sM":55,"eH":9,"eM":57,"rM":"w","dW":1}<blockquote>ì˜¤ì „9ì‹œ55ë¶„ë¶€í„° 9ì‹œ57ë¶„ê¹Œì§€ ë§¤ì£¼ ì›”ìš”ì¼ì— ë™ì‘í•œë‹¤.</blockquote>{"order":4,"mac":"A0:B7:65:CD:4D:34","oper":"list","pI":0}<blockquote>0ë²ˆ í¬íŠ¸ì— ì €ì¥ ë¦¬ìŠ¤íŠ¸ë¥¼ ë³´ì—¬ì¤€ë‹¤.</blockquote>{"order":4,"mac":"A0:B7:65:CD:4D:34","oper":"delete","pI":0,"slotIndex":0}<blockquote>0ë²ˆí•€ì˜ 0ë²ˆì§¸ ë¦¬ìŠ¤íŠ¸ë¥¼ ì‚­ì œí•œë‹¤.</blockquote>{"order":4,"mac":"A0:B7:65:CD:4D:34","oper":"deleteAll","pI":0}<blockquote>0ë²ˆ í•€ì˜ ì €ì¥ëœ ê°’ì„ ëª¨ë‘ ì§€ìš´ë‹¤.</blockquote>|
|5|ì…ë ¥í•€ì— ì¶œë ¥ì„¤ì •|ì…ë ¥í•€ì˜ on off ë™ì‘ì— ë”°ë¼ ì¶œë ¥ì„ ì—°ê²°í•œë‹¤. í†µì‹ ì— ì—°ê²°ë˜ì–´ ìˆëŠ” ëª¨ë“œ ê¸°ê¸°ì˜ ì¶œë ¥í¬íŠ¸ë¥¼ ì—°ê²° í•  ìˆ˜ ìˆë‹¤.<br>ì˜ˆì œ<br> operation : "save":ì¶œë ¥ì„¤ì •ì„ ì €ì¥í•œë‹¤. "list":ì„¤ì •ëœ ê°’ì˜ ë¦¬ìŠ¤íŠ¸ë¥¼ ìš”êµ¬í•œë‹¤. "delete":ì„ íƒí•œ ì„¤ì • ê°’ì„ ì§€ìš´ë‹¤. <br>{"order":5,"oper":"save","mac":"A0:B7:65:CD:4D:34","portNo":0,"portState":[{"mac":"D4:8A:FC:B5:30:10","port":1,"value":false},{"mac":"B0:A7:32:1D:B3:B8","port":1,"value":true}]} <blockquote> ë§¥ì–´ë“œë ˆìŠ¤ê°€ "A0:B7:65:CD:4D:34" 0ë²ˆ í•€ì˜ ë™ì‘ ì €ì¥ on ë ë•Œ ë§¥ì–´ë“œë ˆìŠ¤ê°€ "A0:B7:65:CD:4D:34" 0ë²ˆ í•€ì´ on(true) ëœë‹¤. off ë ë•Œ ë§¥ì–´ë“œë ˆìŠ¤ê°€ "A0:B7:65:CD:4D:34" 0ë²ˆ í•€ì´ off(false) ëœë‹¤. </blockquote>{"order":5,"mac":"A0:B7:65:CD:4D:34","oper":"list","portNo":0} <blockquote>ë§¥ì–´ë“œë ˆìŠ¤ "A0:B7:65:CD:4D:34" ê¸°ê¸° 0ë²ˆ í•€ì˜ ì„¤ì • ê°’ì„ ìš”ì²­í•œë‹¤.</blockquote>ì‘ë‹µ ë©”ì„¸ì§€ ì˜ˆì‹œ <br>{"order":6,"mac":"A0:B7:65:CD:4D:34","portNo":0,"portState":[{"mac":"D4:8A:FC:B5:30:10","port":1,"value":false},{"mac":"B0:A7:32:1D:B3:B8","port":1,"value":true}]}<br>{"order":5,"mac":"A0:B7:65:CD:4D:34","oper":"delete","portNo":0}<blockquote>0ë²ˆ í•€ì˜ ì €ì¥ëœ ê°’ì„ ëª¨ë‘ ì§€ìš´ë‹¤.</blockquote>|
|6|ì˜¨ë„ë³€í™”ì— ì¶œë ¥ì„¤ì •|ì˜ˆì œ<br>{"order":6,"oper":"save","mac":"A0:B7:65:CD:4D:34","tempHigh":28,"tempLow":27,"portState":[{"mac":"D4:8A:FC:B5:30:10","port":0,"value":false},{"mac":"D4:8A:FC:B5:30:10","port":0,"value":true}]} <blockquote>ì˜¨ë„ê°€ 28ë„ë¥¼ ë„˜ì–´ì„¤ ë•Œ ë§¥ì–´ë“œë ˆìŠ¤ "D4:8A:FC:B5:30:10" 0ë²ˆí•€ì´ on ë˜ê³  ì˜¨ë„ê°€ 27ë„ì—ì„œ ë–¨ì–´ì§ˆ ë•Œ ë§¥ì–´ë“œë ˆìŠ¤ "D4:8A:FC:B5:30:10" 0ë²ˆí•€ì´ off ëœë‹¤</blockquote>{"order":6,"mac":"A0:B7:65:CD:4D:34","oper":"list"}<blockquote>ë§¥ì–´ë“œë ˆìŠ¤ "A0:B7:65:CD:4D:34" ê¸°ê¸° ì˜¨ë„ì„¤ì • ë¦¬ìŠ¤íŠ¸ë¥¼ ìš”ì²­í•œë‹¤.</blockquote>    {"order":6,"oper":"cali","mac":"A0:B7:65:CD:4D:34","calTemp":28.1}<blockquote> ë§¥ì–´ë“œë ˆìŠ¤ê°€ "A0:B7:65:CD:4D:34"ì¸ ê¸°ê¸°ì˜ í˜„ì¬ ì˜¨ë„ë¥¼ 28.1ë¡œ ì„¸íŒ…í•œë‹¤.</blockquote>{"order":6,"mac":"A0:B7:65:CD:4D:34","oper":"delete"}<blockquote>ë§¥ì–´ë“œë ˆìŠ¤ê°€ "A0:B7:65:CD:4D:34"ì¸ ê¸°ê¸°ì˜ ì˜¨ë„ì— ë”°ë¥¸ ë™ì‘ ì—°ê²°ì„ ì‚­ì œí•œë‹¤.</blockquote>|
|7|ìŠµë„ë³€í™”ì— ì¶œë ¥ì„¤ì •|ì˜ˆì œ<br>{"order":7,"oper":"save","mac":"A0:B7:65:CD:4D:34","humiHigh":50,"humiLow":49,"portState":[{"mac":"D4:8A:FC:B5:30:10","port":0,"value":false},{"mac":"D4:8A:FC:B5:30:10","port":0,"value":true}]}<blockquote> ìŠµë„ê°€ 50ì„ ë„˜ì–´ì„¤ ë•Œ ë§¥ì–´ë“œë ˆìŠ¤ "D4:8A:FC:B5:30:10" 0ë²ˆí•€ì´ on ë˜ê³  ìŠµë„ê°€ 49ë¡œ ë–¨ì–´ì§ˆ ë•Œ ë§¥ì–´ë“œë ˆìŠ¤ "D4:8A:FC:B5:30:10" 0ë²ˆí•€ì´ off ëœë‹¤</blockquote>{"order":7,"mac":"A0:B7:65:CD:4D:34","oper":"list"}<blockquote>ë§¥ì–´ë“œë ˆìŠ¤ "A0:B7:65:CD:4D:34" ê¸°ê¸° ì˜¨ë„ì„¤ì • ë¦¬ìŠ¤íŠ¸ë¥¼ ìš”ì²­í•œë‹¤.</blockquote> {"order":7,"oper":"cali","mac":"A0:B7:65:CD:4D:34","calHumi":48}<br><blockquote> ë§¥ì–´ë“œë ˆìŠ¤ê°€ "A0:B7:65:CD:4D:34"ì¸ ê¸°ê¸°ì˜ í˜„ì¬ ìŠµë„ë¥¼ 48ë¡œ ì„¸íŒ…í•œë‹¤.</blockquote>{"order":7,"mac":"A0:B7:65:CD:4D:34","oper":"delete"}<blockquote> ë§¥ì–´ë“œë ˆìŠ¤ê°€ "A0:B7:65:CD:4D:34"ì¸ ê¸°ê¸°ì˜ ìŠµë„ì— ë”°ë¥¸ ë™ì‘ ì—°ê²°ì„ ì‚­ì œí•œë‹¤.</blockquote>|
|8| ì„¼ì„œë³€í™”ì˜ ì¶œë ¥ì„¤ì • | order 6,7 ì„ í¬í•¨í•œ ëª¨ë“  ì„¼ì„œì˜ ë™ì‘ì„ ì„¤ì • í•©ë‹ˆë‹¤. í”„ë¡œí† ì½œì€ ì˜¨ë„ ìŠµë„ì™€ ë™ì¼ í•©ë‹ˆë‹¤. |
|9|ì„¼ì„œ ì•¡íŠœì—ì´í„° ì°¸ì¡°ê°’| í„°ì¹˜íŒ¨ë„ì´ ì„¤ì¹˜ë˜ì–´ ë³„ë„ì˜ cpuì—ì„œ ì„¼ì„œ ê³„ì¸¡ê°’ì„ ë©”ì¸ë³´ë“œë¡œ ë³´ë‚´ë©´ ì´ ê°’ì„ ê¸°ë¡í•˜ê³  í¬ë¼ìš°ë“œ ì„œë²„ë¡œ ë³´ë‚¸ì.     <br> ì˜ˆì œ í„°ì¹˜ìŠ¤í¬ë¦° rp2040ì—ì„œ IoT PLCë¡œ ì¡°ë„ì„¼ì„œ ê°’ì„ ë³´ë‚¸ë‹¤.     <br>{"order":8, "light":120} |

      

ìœ„ì— ê¸°ìˆ í•œ í”„ë¡œí† ì½œì„ node red ì—ì„œ ì‹¤í–‰ í•œ ê²ƒì…ë‹ˆë‹¤. í°ì˜ ì–´í”Œì—ì„œ êµ¬í˜„í•œ ê²ƒì„ node redë¡œ í”„ë¡œê·¸ë¨í•´ì„œ ì‚¬ìš©í• ìˆ˜ ìˆìŠµë‹ˆë‹¤.
<a href="https://youtu.be/ufBprCdABSk">
    <img src="https://github.com/user-attachments/assets/01886cc0-2b59-4e1c-962b-f5b7cc751a45" alt="i2r í”„ë¡œí† ì½œ" width="800">
</a>

[í”„ë¡œí† ì½œ node red ì†ŒìŠ¤í”„ë¡œê·¸ë¨](https://github.com/kdi6033/i2r/blob/main/txt/protocol%20node%20red%20example.json)

<a href="https://youtu.be/ufBprCdABSk">
    <img src="https://github.com/user-attachments/assets/fd75d17a-1c77-46e2-872d-b610dede45c3" alt="protocol" width="400">
</a>




### ì•„ë‘ì´ë…¸ í”„ë¡œê·¸ë¨ ì„¤ì •    
<a href="https://youtu.be/UrJd-RHRh6U">
    <img src="https://github.com/user-attachments/assets/67556286-b878-44ef-9175-553a6aa418ef" alt="Updating the screen" width="400">
</a>    

[24-7 ë³´ë“œ ì•„ë‘ì´ë…¸ í”„ë¡œê·¸ë¨](https://github.com/user-attachments/assets/67556286-b878-44ef-9175-553a6aa418ef)

File->Preferences->Additional Boards Manager URLs    
https://dl.espressif.com/dl/package_esp32_index.json    
<img src="https://github.com/user-attachments/assets/06ad8c17-ff02-44dc-be2c-938445e5f4b6" width="50%" />   

Tools->Boars Manager   

<img src="https://github.com/user-attachments/assets/51f0ed8c-96f8-4c98-aa2b-f361b2235f68" width="30%" />

### partitions.csv íŒŒì¼ ì‘ì„±
Flash ë©”ëª¨ë¦¬ í• ë‹¹ì„ í•©ë‹ˆë‹¤.
Skech->Export Compiled Binary ë¥¼ ì‹¤í–‰í•˜ë©´ build ë””ë ‰í† ë¦¬ê°€ ë§Œë“¤ì–´ ì§‘ë‹ˆë‹¤.
ë‹¤ìŒì€ ìƒì„±ëœ íŒŒì¼ ìš©ëŸ‰ ì…ë‹ˆë‹¤.
```
2024-09-29  ì˜¤ì „ 09:44         1,932,784 board-i2r-03.ino.bin
2024-09-29  ì˜¤ì „ 09:44            24,896 board-i2r-03.ino.bootloader.bin
2024-09-29  ì˜¤ì „ 09:44        20,233,488 board-i2r-03.ino.elf
2024-09-29  ì˜¤ì „ 09:44        24,280,721 board-i2r-03.ino.map
2024-09-29  ì˜¤ì „ 09:44         8,388,608 board-i2r-03.ino.merged.bin
2024-09-29  ì˜¤ì „ 09:44             3,072 board-i2r-03.ino.partitions.bin
               6ê°œ íŒŒì¼          54,863,569 ë°”ì´íŠ¸
```
i2r-03.ino.bin (1,932,784 ë°”ì´íŠ¸): ì´ íŒŒì¼ì€ ì»´íŒŒì¼ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°”ì´ë„ˆë¦¬ì…ë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ ìì²´ê°€ ì•½ 1.8MB í¬ê¸°ë¡œ, ì´ëŠ” í”Œë˜ì‹œ ë©”ëª¨ë¦¬ ë‚´ app0 ë˜ëŠ” app1 íŒŒí‹°ì…˜ì— ì €ì¥ë©ë‹ˆë‹¤.    

i2r-03.ino.bootloader.bin (24,896 ë°”ì´íŠ¸): ë¶€íŠ¸ë¡œë” íŒŒì¼ë¡œ, ë§¤ìš° ì‘ì€ í¬ê¸°ì…ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ë¶€íŠ¸ë¡œë”ëŠ” í”Œë˜ì‹œ ë©”ëª¨ë¦¬ì˜ ë³„ë„ íŒŒí‹°ì…˜ì— ì €ì¥ë˜ë©°, ì•½ 24KB ì •ë„ë¡œ ì¶©ë¶„íˆ ì‘ì€ í¬ê¸°ì…ë‹ˆë‹¤.    

i2r-03.ino.elf (20,233,464 ë°”ì´íŠ¸): ELF íŒŒì¼ì€ ë””ë²„ê·¸ ì •ë³´ê°€ í¬í•¨ëœ íŒŒì¼ë¡œ, í”Œë˜ì‹œ ë©”ëª¨ë¦¬ì—ëŠ” ì—…ë¡œë“œë˜ì§€ ì•Šê³  ì»´íŒŒì¼ ê³¼ì • ì¤‘ì—ë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤. ì¦‰, ì´ íŒŒì¼ì€ ì‹¤ì œë¡œ ë””ë°”ì´ìŠ¤ì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠìŠµë‹ˆë‹¤.    

i2r-03.ino.map (24,273,503 ë°”ì´íŠ¸): ì´ íŒŒì¼ì€ ë©”ëª¨ë¦¬ ë§¤í•‘ ì •ë³´ë¥¼ í¬í•¨í•˜ëŠ” íŒŒì¼ë¡œ, ë””ë²„ê¹…ì„ ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ ì—­ì‹œ í”Œë˜ì‹œ ë©”ëª¨ë¦¬ì—ëŠ” ì—…ë¡œë“œë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì‹¤ì œ ë©”ëª¨ë¦¬ ìš©ëŸ‰ê³¼ëŠ” ë¬´ê´€í•©ë‹ˆë‹¤.    

i2r-03.ino.merged.bin (8,388,608 ë°”ì´íŠ¸): ì´ íŒŒì¼ì€ ì• í”Œë¦¬ì¼€ì´ì…˜, ë¶€íŠ¸ë¡œë”, íŒŒí‹°ì…˜ í…Œì´ë¸”ì´ í•©ì³ì§„ í†µí•© ë°”ì´ë„ˆë¦¬ íŒŒì¼ì…ë‹ˆë‹¤. ì´ í¬ê¸°ê°€ í”Œë˜ì‹œ ë©”ëª¨ë¦¬ì˜ ì „ì²´ í¬ê¸°ì™€ ì¼ì¹˜í•˜ë¯€ë¡œ, ì´ íŒŒì¼ì„ í”Œë˜ì‹œ ë©”ëª¨ë¦¬ì— ì—…ë¡œë“œí•  ê²½ìš° ì „ì²´ ìš©ëŸ‰ì„ ê½‰ ì±„ìš°ê²Œ ë©ë‹ˆë‹¤.   

i2r-03.ino.partitions.bin (3,072 ë°”ì´íŠ¸): íŒŒí‹°ì…˜ í…Œì´ë¸” íŒŒì¼ë¡œ, ì‘ì€ í¬ê¸°ì´ë¯€ë¡œ ë¬¸ì œì—†ì´ í”Œë˜ì‹œ ë©”ëª¨ë¦¬ì— ì €ì¥ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.    

1,932,784 board-i2r-03.ino.bin ì´ íŒŒì¼ì´ ì‹¤í–‰íŒŒì¼ì€ 1.95M ì •ë„ì˜ ìš©ëŸ‰ ì…ë‹ˆë‹¤.
ì‹¤í–‰ íŒŒì¼ì„ ìœ„í•´ ì—¬ìœ ìˆê²Œ  2.5M, OTAë¥¼ ìœ„í•´ ê°™ì€ ìš©ëŸ‰ 2.5M, SPIFF ì—ëŠ” 1.8Më¥¼ í• ë‹¹ í•˜ê² ìŠµë‹ˆë‹¤.    
[ChatGPT]
```
2024-09-29  ì˜¤ì „ 09:44         1,932,784 board-i2r-03.ino.bin
2024-09-29  ì˜¤ì „ 09:44            24,896 board-i2r-03.ino.bootloader.bin
2024-09-29  ì˜¤ì „ 09:44        20,233,488 board-i2r-03.ino.elf
2024-09-29  ì˜¤ì „ 09:44        24,280,721 board-i2r-03.ino.map
2024-09-29  ì˜¤ì „ 09:44         8,388,608 board-i2r-03.ino.merged.bin
2024-09-29  ì˜¤ì „ 09:44             3,072 board-i2r-03.ino.partitions.bin
               6ê°œ íŒŒì¼          54,863,569 ë°”ì´íŠ¸
ì‹¤í–‰ íŒŒì¼ì„ ìœ„í•´ ì—¬ìœ ìˆê²Œ  2.5M, OTAë¥¼ ìœ„í•´ ê°™ì€ ìš©ëŸ‰ 2.5M, SPIFF ì—ëŠ” 1.8Më¥¼ í• ë‹¹í•´ì„œ partitions.csv íŒŒì¼ ì‘ì„±í•´ì¤˜
```
ë‹¤ìŒì€ ìƒì„±ëœ partitions.csv íŒŒì¼ ì…ë‹ˆë‹¤.
```
# Name,   Type, SubType, Offset,  Size,   Flags
nvs,      data, nvs,     0x9000,  0x5000,
otadata,  data, ota,     0xe000,  0x2000,
app0,     app,  ota_0,   0x10000, 0x280000,  
app1,     app,  ota_1,   0x290000, 0x280000, 
spiffs,   data, spiffs,  0x510000, 0x180000  
```
- ì²« ë²ˆì§¸ë¡œ NVS íŒŒí‹°ì…˜ì€ ë¹„íœ˜ë°œì„± ì €ì¥ì†Œ(Non-Volatile Storage)ì…ë‹ˆë‹¤. ì´ ì˜ì—­ì€ ì„¤ì •ê°’ì´ë‚˜ ì‘ì€ ë°ì´í„°ë¥¼ ì˜êµ¬ì ìœ¼ë¡œ ì €ì¥í•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì™€ì´íŒŒì´ ì—°ê²° ì •ë³´ë‚˜ ë””ë°”ì´ìŠ¤ ì„¤ì • ê°’ê³¼ ê°™ì€ ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆìœ¼ë©°, ì´ ë°ì´í„°ëŠ” ì „ì›ì„ ê»ë‹¤ ì¼œë„ ìœ ì§€ë©ë‹ˆë‹¤. NVSëŠ” EEPROMê³¼ ë¹„ìŠ·í•œ ì—­í• ì„ í•˜ë©°, ì´ í…Œì´ë¸”ì—ì„œëŠ” 0x9000 ì˜¤í”„ì…‹ì—ì„œ ì‹œì‘í•˜ì—¬ 20KB í¬ê¸°ë¡œ í• ë‹¹ë˜ì–´ ìˆìŠµë‹ˆë‹¤. Offset: 0x9000 ì—ì„œ ì‹œì‘í•´ì„œ Size: 0x5000 (20KB) í• ë‹¹

- ë‘ ë²ˆì§¸ë¡œ OTA ë°ì´í„° íŒŒí‹°ì…˜ì€ OTA ì—…ë°ì´íŠ¸ë¥¼ ê´€ë¦¬í•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤. OTA(Over-The-Air) ì—…ë°ì´íŠ¸ëŠ” ë””ë°”ì´ìŠ¤ì˜ íŒì›¨ì–´ë¥¼ ë¬´ì„ ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì¸ë°, ì´ íŒŒí‹°ì…˜ì€ í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ì—…ë°ì´íŠ¸ ìƒíƒœë¥¼ ì €ì¥í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. OTA ì—…ë°ì´íŠ¸ê°€ ì§„í–‰ë  ë•Œ, ì‹œìŠ¤í…œì´ ì–´ë–¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í• ì§€ ê²°ì •í•˜ëŠ” ì¤‘ìš”í•œ ì •ë³´ë¥¼ ì—¬ê¸°ì— ì €ì¥í•©ë‹ˆë‹¤. ì´ íŒŒí‹°ì…˜ì€ 0xe000 ì˜¤í”„ì…‹ì—ì„œ ì‹œì‘í•˜ë©°, 8KBì˜ í¬ê¸°ë¥¼ ê°€ì§‘ë‹ˆë‹¤. Offset: 0xe000 ì—ì„œ ì‹œì‘í•´ì„œ Size: 0x2000 (8KB) í• ë‹¹

- ì„¸ ë²ˆì§¸ì™€ ë„¤ ë²ˆì§¸ë¡œ app0ê³¼ app1 íŒŒí‹°ì…˜ì€ ê°ê° OTA ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì €ì¥ ê³µê°„ì…ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ESP32ëŠ” ë‘ ê°œì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ íŒŒí‹°ì…˜ì„ ê°€ì§‘ë‹ˆë‹¤. í•˜ë‚˜ëŠ” í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì €ì¥ëœ ê³µê°„ì´ê³ , ë‹¤ë¥¸ í•˜ë‚˜ëŠ” ìƒˆë¡œìš´ ì—…ë°ì´íŠ¸ë¥¼ ë‹¤ìš´ë¡œë“œí•  ê³µê°„ì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ app0ì— ì €ì¥ë˜ì–´ ìˆê³ , OTA ì—…ë°ì´íŠ¸ë¥¼ í†µí•´ ìƒˆë¡œìš´ íŒì›¨ì–´ê°€ app1ì— ë‹¤ìš´ë¡œë“œë©ë‹ˆë‹¤. ì—…ë°ì´íŠ¸ê°€ ì™„ë£Œë˜ë©´ ë‹¤ìŒì— ë””ë°”ì´ìŠ¤ê°€ ë¶€íŒ…ë  ë•Œ app1ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ë©ë‹ˆë‹¤. app0ê³¼ app1 íŒŒí‹°ì…˜ì€ ê°ê° 2.5MB í¬ê¸°ë¡œ í• ë‹¹ë˜ì–´ ìˆì–´ ëŒ€ê·œëª¨ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. app0 ëŠ” Offset: 0x10000 ì—ì„œ ì‹œì‘í•´ì„œ Size: 0x280000 (2.5MB) í• ë‹¹, app1ëŠ” Offset: 0x290000 ì—ì„œ ì‹œì‘í•´ì„œ Size: 0x280000 (2.5MB) í• ë‹¹

- ë§ˆì§€ë§‰ìœ¼ë¡œ SPIFFS íŒŒí‹°ì…˜ì€ íŒŒì¼ ì‹œìŠ¤í…œ ì €ì¥ ê³µê°„ì…ë‹ˆë‹¤. SPIFFSëŠ” í”Œë˜ì‹œ ë©”ëª¨ë¦¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ íŒŒì¼ ì‹œìŠ¤í…œìœ¼ë¡œ, ë””ë°”ì´ìŠ¤ê°€ HTML íŒŒì¼, ì´ë¯¸ì§€, ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ ë“± ë‹¤ì–‘í•œ íŒŒì¼ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ì½ì„ ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì›¹ì„œë²„ë¥¼ êµ¬í˜„í•˜ëŠ” ê²½ìš° ì›¹ í˜ì´ì§€ì˜ ì •ì  íŒŒì¼ì„ SPIFFSì— ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  ì´ íŒŒí‹°ì…˜ì€ 1.5MB í¬ê¸°ë¡œ í• ë‹¹ë˜ì–´ ìˆìœ¼ë©°, ì‹œìŠ¤í…œì´ íŒŒì¼ ê¸°ë°˜ ë°ì´í„°ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ì¤‘ìš”í•œ ê³µê°„ì…ë‹ˆë‹¤. Offset: 0x510000 ì—ì„œ ì‹œì‘í•´ì„œ Size: 0x180000 (1.5MB) í• ë‹¹.

# Node-RED ì„œë²„ êµ¬ì¶•
## PC IoT ì„œë²„ (Node-RED)    
- PCì—ì„œ node red ì™€ mongoDBë¥¼ ì„¤ì¹˜í•˜ì—¬ ì¸í„°ë„· ìƒì—ì„œ ì œì–´í•œë‹¤.
- ì–´í”Œì—ì„œ IoT-PLCë¥¼ ì™€ì´íŒŒì´ì— ì ‘ì†ë§Œ ì‹œí‚¤ë©´ ë°ì´í„°ë² ì´ìŠ¤ì— ìë™ ì €ì¥ë˜ê³  ì œì–´íŒë„¬ì´ ìë™ìœ¼ë¡œ ìƒì„±ë˜ì–´ì„œ ëª¨ë‹ˆí„°ë§/ì œì–´ë¥¼ í•  ìˆ˜ ìˆë‹¤.

<a href="https://youtu.be/nL3qdDtZC98">
    <img src="https://github.com/user-attachments/assets/1015639c-ed79-44fb-a690-3545664a31e7" alt="node red ì„¤ì¹˜ ìœˆë„ìš°ìš© " width="400">
</a>
<a href="https://youtu.be/5spmnQX0IjM">
    <img src="https://github.com/user-attachments/assets/9da548f6-9872-48d7-846c-e790586c5511" alt="mongodb, compass ìœˆë„ìš°ìš© ì„¤ì¹˜í•˜ê¸° " width="400">
</a>    


ì–´í”Œ ì•„ë‘ì´ë…¸ ì†ŒìŠ¤ í”„ë¡œê·¸ë¨ê³¼ ë™ì¼ í•©ë‹ˆë‹¤.<br>

[i2r-02 ë³´ë“œ ì•„ë‘ì´ë…¸ í”„ë¡œê·¸ë¨](https://github.com/kdi6033/i2r-02/blob/main/0%20Source-Program-IoT/board-i2r-02-local.ino)  
[i2r-03 ë³´ë“œ ì•„ë‘ì´ë…¸ í”„ë¡œê·¸ë¨](https://github.com/kdi6033/i2r-03/blob/main/0%20Source-Program-IoT/board-i2r-03-local.ino)  
[i2r-04 ë³´ë“œ ì•„ë‘ì´ë…¸ í”„ë¡œê·¸ë¨](https://github.com/kdi6033/i2r-04/blob/main/0%20Source-Program-IoT/board-i2r-04-local.ino)  

[ìœˆë„ìš° PCìš© NodeRED ì†ŒìŠ¤í”„ë¡œê·¸ë¨](https://github.com/kdi6033/i2r/blob/main/0%20Source-Program-IOT/nodered-local.json)    
![nodered-flow](https://github.com/user-attachments/assets/69855573-c93a-4180-be8a-5cd442f85d2c)   
 
mongoDBì— ë°ì´í„°ê°€ ìë™ìœ¼ë¡œ ì €ì¥ ëœ ëª¨ìŠµ    
<img src="https://github.com/user-attachments/assets/1c8ee718-8561-4eeb-bdd4-366b209b9fc6" width="400">    <br>
- node red ì—ì„œ ìë™ ìƒì„±ëœ ì œì–´íŒë„¬    
<img src="https://github.com/user-attachments/assets/91897ea9-785e-488f-9f3e-241a049b78f3" width="30%"><br>
node red flow    

## ì•„ë§ˆì¡´ í¬ë¼ìš°ë“œ AWS IoT ì„œë²„  (Node-RED)     
<a href="https://youtu.be/n1MRXSVtbBI">
    <img src="https://github.com/user-attachments/assets/8a2ccaba-8b4a-44a1-8ac9-556d96cbd0ad" alt="AWS Instal EC2 Ubuntu Server 22.04" width="400">
</a>
<a href="https://youtu.be/5ojpKiQ00qk">
    <img src="https://github.com/user-attachments/assets/10dfdc4e-d581-4cfe-92f1-8a700069e1f4" alt="AWS IOT Core Mqtt" width="400">
</a>

<a href="https://youtu.be/mruzmon95BE">
    <img src="https://github.com/user-attachments/assets/bb05f92c-e8d3-4ca2-a0c4-7a97adb5c08f" alt="AWS IOT Core Mqtt" width="400">
</a>
<a href="https://youtu.be/WJrOxAN7ZH0">
    <img src="https://github.com/user-attachments/assets/69d1455b-cbb1-4f09-b0c2-356d4bbcc515" alt="AWS IOT Core Mqtt" width="400">
</a>

<a href="https://youtu.be/vLT3sr_xAFE">
    <img src="https://github.com/user-attachments/assets/7c56667a-631c-4bc4-a681-a7a4a49cb729" alt="AWS IoT server" width="400">
</a>
<a href="https://youtu.be/Q7IL_ERRIwI">
    <img src="https://github.com/user-attachments/assets/5f8fae58-d80b-4d26-b863-c20c24a20021" alt="AWS IoT ë³´ì•ˆ server" width="400">
</a>

<br>

[i2r-02 ë³´ë“œ AWS ì•„ë‘ì´ë…¸ í”„ë¡œê·¸ë¨](https://github.com/kdi6033/i2r-02/tree/main/0%20Source-Program-IoT/board-i2r-02-aws)  
[i2r-03 ë³´ë“œ AWS ì•„ë‘ì´ë…¸ í”„ë¡œê·¸ë¨](https://github.com/kdi6033/i2r-03/tree/main/0%20Source-Program-IoT/board-i2r-03-aws)  
[i2r-04 ë³´ë“œ AWS ì•„ë‘ì´ë…¸ í”„ë¡œê·¸ë¨](https://github.com/kdi6033/i2r-04/tree/main/0%20Source-Program-IoT/board-i2r-04-aws)  

[Node-RED ì„¤ì¹˜ìˆœì„œ](https://github.com/kdi6033/i2r/blob/main/txt/aws%20node%20red%20install.txt)    

[mongoDB ì„¤ì¹˜ìˆœì„œ](https://github.com/kdi6033/i2r/blob/main/txt/aws%20mongoDB%20install)    


[ì•„ë§ˆì¡´ í¬ë¼ìš°ë“œ AWS NodeRED ì†ŒìŠ¤í”„ë¡œê·¸ë¨](https://github.com/kdi6033/i2r/blob/main/0%20Source-Program-IOT/nodered-aws.json)

# IoT PLC í„°ì¹˜ìŠ¤í¬ë¦°
ESP32 IoT PLCì™€ CrowPanel(RP2040)ì„ I2Cë¡œ ì—°ê²°í•˜ì—¬,
CrowPanelì€ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ì™€ I2C ì„¼ì„œ ê³„ì¸¡ì„ ë‹´ë‹¹í•˜ê³ ,
ESP32ëŠ” ë¦´ë ˆì´ ì œì–´ ë° í´ë¼ìš°ë“œ(MQTT) ì—°ë™ì„ ë‹´ë‹¹í•˜ëŠ” IoT ì œì–´ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.    
![ChatGPT Image 2025ë…„ 6ì›” 19ì¼ ì˜¤ì „ 10_09_21](https://github.com/user-attachments/assets/06412467-1643-4176-95d3-0994f6a94572)

        
ì‹œìŠ¤í…œ êµ¬ì„±
| í•­ëª©           | ì„¤ëª…                                      |
| ------------ | --------------------------------------- |
| **I2C ë§ˆìŠ¤í„°**  | CrowPanel (RP2040)                      |
| **I2C ìŠ¬ë ˆì´ë¸Œ** | ESP32                                   |
| **ì„¼ì„œ ê³„ì¸¡**    | CrowPanelì—ì„œ ì§ì ‘ I2Cë¡œ ê³„ì¸¡ (ì¡°ë„, ì˜¨ìŠµë„ ë“±)      |
| **UI ì´ë²¤íŠ¸**   | í„°ì¹˜ ë²„íŠ¼ â†’ ESP32ì— ëª…ë ¹ ì „ì†¡ (`{"cmd":"on"}` ë“±) |
| **ì•¡ì¸„ì—ì´í„° ì œì–´** | ESP32ì—ì„œ ëª…ë ¹ ìˆ˜ì‹  í›„ ë¦´ë ˆì´/ëª¨í„° ì œì–´               |
| **í´ë¼ìš°ë“œ ì—°ë™**  | ESP32 â†’ MQTT ì „ì†¡ (ì„ íƒì  ê¸°ëŠ¥)                |

ì—°ê²° í•€ êµ¬ì„± (ì˜ˆì‹œ)
| ì¥ì¹˜                 | ê¸°ëŠ¥  | í•€       |
| ------------------ | --- | ------- |
| CrowPanel (RP2040) | SDA | GPIO 20 |
|                    | SCL | GPIO 21 |
| ESP32 (i2r-04)     | SDA | GPIO 16 |
|                    | SCL | GPIO 17 |


## CrowPanel(RP2040) 3.5" í„°ì¹˜ìŠ¤í¬ë¦°

ì£¼ìš” ì‚¬ì–‘ (Specifications)
| í•­ëª©            | ë‚´ìš©                                |
| ------------- | --------------------------------- |
| **MCU**       | Raspberry Pi RP2040               |
| **ë””ìŠ¤í”Œë ˆì´**     | 3.5ì¸ì¹˜ TFT LCD                     |
| **í•´ìƒë„**       | 480 Ã— 320 pixels                  |
| **í„°ì¹˜ ë°©ì‹**     | ì •ì „ì‹ í„°ì¹˜ìŠ¤í¬ë¦° (CTP)                   |
| **í„°ì¹˜ ì»¨íŠ¸ë¡¤ëŸ¬**   | FT6236 (I2C ì¸í„°í˜ì´ìŠ¤)                |
| **í”Œë˜ì‹œ ë©”ëª¨ë¦¬**   | 16MB (ì™¸ë¶€ Flash)                   |
| **USB**       | USB Type-C (í”„ë¡œê·¸ë¨ ì—…ë¡œë“œ ë° ì „ì› ê³µê¸‰)     |
| **I/O ì¸í„°í˜ì´ìŠ¤** | 20í•€ í™•ì¥í—¤ë” (I2C, SPI, UART, GPIO ë“±) |
| **ì „ì› ì…ë ¥**     | 5V (USB-C ë˜ëŠ” í™•ì¥ ì»¤ë„¥í„°)              |
| **í¬ê¸°**        | 85mm Ã— 55mm                       |
| **ì‚¬ìš©ê°€ëŠ¥ ì–¸ì–´**   | C/C++, MicroPython                |
| **LVGL ì§€ì›**   | LVGL 8.x / 9.x ì§€ì› (UI ê°œë°œìš© ë¼ì´ë¸ŒëŸ¬ë¦¬)  |


GPIO Pin Definition

| í•€ ë²ˆí˜¸    | ê¸°ëŠ¥                     |
| ------- | ---------------------- |
| **P1**  | GP0 / UART0 TX         |
| **P2**  | GP1 / UART0 RX         |
| **P3**  | GP2 / I2C1 SDA         |
| **P4**  | GP3 / I2C1 SCL         |
| **P5**  | GP4 / UART1 TX         |
| **P6**  | GP5 / UART1 RX         |
| **P7**  | GP6 / I2C1 SDA         |
| **P8**  | GP7 / I2C1 SCL         |
| **P9**  | GP19                   |
| **P10** | GP20 / I2C0 SDA        |
| **P11** | GP21 / I2C0 SCL        |
| **P12** | GP26 / ADC1 / I2C1 SDA |
| **P13** | GP27 / ADC0 / I2C1 SCL |
| **P14** | GP28 / ADC2            |
| **P15** | GND (Ground)           |
| **P16** | VCC (3.3V ì¶œë ¥)          |

ğŸ“º ê¸°ìˆ  ìë£Œ    
[ì°¸ì¡°ê¸°ìˆ ë¬¸ì„œ ë° í”„ë¡œê·¸ë¨ ë‹¤ìš´ë¡œë“œ](https://github.com/Elecrow-RD/CrowPanel-Pico-Display-Course-File)    
[íšŒë¡œë„](https://github.com/user-attachments/files/20807927/CrowPanel_Pico_Display-3.5_V1.0-SCH.pdf)    
[ìœ íŠœë¸Œ ì‹œ](https://www.youtube.com/watch?v=5lLdKOjR-Lo&list=PLwh4PlcPx2GdvAtPGuAf1ocWj1UyPWw3W)    
[Wiki](https://www.elecrow.com/wiki/CrowPanel_Pico_HMI_Display-3.5.html)    

### âœ… í„°ì¹˜ìŠ¤í¬ë¦° í”„ë¡œí† ì½œ
ì²«ë²ˆì§¸ ì…ë ¥í¬íŠ¸ì˜ ê°’ì´ on ì¼ë•Œ
```
{ "c":1,"n":0,"v":1)
```

| í•­ëª©     | ë°”ì´íŠ¸ ìˆ˜   | ì„¤ëª…                           |
| ------ | ------- | ---------------------------- |
| c | 1 byte  | commmand  (1:ì…ë ¥, 2:ì¶œë ¥ )                |
| n  | 1 byte  | ì…ì¶œë ¥ í¬íŠ¸ë²ˆí˜¸ |
| v  | 1 byte  | int bool ë“±ì˜ ê°’  |


```
[0xA5][len][cmd][data...][chk]
```

| í•­ëª©     | ë°”ì´íŠ¸ ìˆ˜   | ì„¤ëª…                           |
| ------ | ------- | ---------------------------- |
| `0xA5` | 1 byte  | í—¤ë” (ì‹œì‘ êµ¬ë¶„ì)                  |
| `len`  | 1 byte  | ë°ì´í„° ê¸¸ì´ (`cmd + data`ì˜ ë°”ì´íŠ¸ ìˆ˜) |
| `cmd`  | 1 byte  | ëª…ë ¹ ì½”ë“œ (1=ì…ë ¥, 2=ì¶œë ¥, 3=ì˜¨ë„...)  |
| `data` | N bytes | ëª…ë ¹ì— ë”°ë¥¸ ì‹¤ì œ ë°ì´í„°                |
| `chk`  | 1 byte  | CRC-8 ì²´í¬ì„¬ (í—¤ë” ì œì™¸ ì „ì²´ì— ëŒ€í•´ ê³„ì‚°)  |

âœ… ëª…ë ¹ ì½”ë“œ ì •ì˜ (cmd)
| ê°’      | ì˜ë¯¸    | ì„¤ëª…                 |
| ------ | ----- | ------------------ |
| `0x01` | ì…ë ¥    | ë²„íŠ¼ ë²ˆí˜¸ ë° on/off ìƒíƒœ  |
| `0x02` | ì¶œë ¥    | ëª¨í„° ìƒíƒœ ë“±            |
| `0x03` | ì˜¨ë„ ì„¼ì„œ | ì˜¨ë„ ì „ì†¡ (`uint16_t`) |

âœ… ì˜ˆì‹œ â‘ : ì…ë ¥ ëª…ë ¹ (ë²„íŠ¼ 2ë²ˆì´ ON)
| í•„ë“œ  | ê°’                             |
| --- | ----------------------------- |
| í—¤ë”  | `0xA5`                        |
| ê¸¸ì´  | `0x02` (ëª…ë ¹ 1 + ë°ì´í„° 1 + 1 = 2) |
| ëª…ë ¹  | `0x01` (ì…ë ¥)                   |
| ë°ì´í„° | `0b00100001` = ë²„íŠ¼ë²ˆí˜¸ 2, ìƒíƒœ ON  |
| CRC | ê³„ì‚°ëœ CRC8 ê°’                    |

âœ… CRC8 ê³„ì‚° ë°©ë²• (ì˜ˆ: x^8 + x^2 + x + 1)
```
uint8_t crc8(const uint8_t *data, size_t len) {
  uint8_t crc = 0x00;
  for (size_t i = 0; i < len; ++i) {
    crc ^= data[i];
    for (uint8_t j = 0; j < 8; ++j) {
      if (crc & 0x80)
        crc = (crc << 1) ^ 0x07;  // ë‹¤í•­ì‹: x^8 + x^2 + x + 1 (0x07)
      else
        crc <<= 1;
    }
  }
  return crc;
}
```

# LVGL (Light and Versatile Graphics Library)
ì„ë² ë””ë“œ ì‹œìŠ¤í…œìš© ê³ ì„±ëŠ¥ ê·¸ë˜í”½ UI í”„ë ˆì„ì›Œí¬
ì ì€ ë©”ëª¨ë¦¬ì—ì„œë„ ë¶€ë“œëŸ½ê³  ì§ê´€ì ì¸ í„°ì¹˜ UIë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆëŠ” ì˜¤í”ˆì†ŒìŠ¤ ê·¸ë˜í”½ ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤
[lvgl ê¸°ìˆ ì‚¬ì´íŠ¸](https://github.com/lvgl/lvgl)    

TFT_eSPI ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜     
![TFT_eSPI](https://github.com/user-attachments/assets/1423d2ef-853d-418b-8de9-22546349be82)    

[ì°¸ì¡°ê¸°ìˆ ë¬¸ì„œ ë° í”„ë¡œê·¸ë¨ ë‹¤ìš´ë¡œë“œ](https://github.com/Elecrow-RD/CrowPanel-Pico-Display-Course-File)    
ì—¬ê¸°ì„œ ë‹¤ìš´ë¡œë“œ ë°›ì€ íŒŒì¼ì¤‘ì— User_Setup.h ë¥¼ ì•„ë‘ì´ë…¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë””ë ‰í† ë¦¬ì— ë³µì‚¬ í•œë‹¤.   
![TFT_eSPI-1](https://github.com/user-attachments/assets/0839872d-5459-4bf3-996e-cec4612d6493)
World
lvgl ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜     
ê·¸ë¦¼ê³¼ ê°™ì´ ê¼­ 8.3.11 ë²„ì ¼ì„ ì„¤ì¹˜í•´ì•¼ í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ ë©ë‹ˆë‹¤.
ìœ„ì—ì„œ ë‹¤ìš´ë¡œë“œ ë°›ì€ íŒŒì¼ì¤‘ì— lv_conf.h ë¥¼ ì•„ë‘ì´ë…¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë””ë ‰í† ë¦¬ì— ë³µì‚¬ í•œë‹¤.  
![lvgl](https://github.com/user-attachments/assets/070e58a6-ff88-46ab-a752-f6446f9c30a9)

ê¸°ë³¸ì ì¸ ë¬¸ìë¥¼ ì¶œë ¥í•´ ë´…ë‹ˆë‹¤.
Text ì¶œë ¥ Hello 
```
#include <lvgl.h>
#include <TFT_eSPI.h>

/* ë””ìŠ¤í”Œë ˆì´ í•´ìƒë„ */
static const uint16_t screenWidth  = 480;
static const uint16_t screenHeight = 320;

static lv_disp_draw_buf_t draw_buf;
static lv_color_t buf[screenWidth * screenHeight / 10];

TFT_eSPI tft = TFT_eSPI();  // TFT ê°ì²´

/* í™”ë©´ ê°±ì‹  í•¨ìˆ˜ */
void my_disp_flush(lv_disp_drv_t *disp, const lv_area_t *area, lv_color_t *color_p) {
  uint32_t w = area->x2 - area->x1 + 1;
  uint32_t h = area->y2 - area->y1 + 1;

  tft.startWrite();
  tft.setAddrWindow(area->x1, area->y1, w, h);
  tft.pushColors((uint16_t *)&color_p->full, w * h, true);
  tft.endWrite();

  lv_disp_flush_ready(disp);
}

void setup() {
  Serial.begin(115200);
  lv_init();        // LVGL ì´ˆê¸°í™”
  tft.begin();      // TFT ì´ˆê¸°í™”
  tft.setRotation(3);  // í•„ìš”ì— ë”°ë¼ íšŒì „ê°’ ë³€ê²½

  // ë²„í¼ ì´ˆê¸°í™”
  lv_disp_draw_buf_init(&draw_buf, buf, NULL, screenWidth * screenHeight / 10);

  // ë””ìŠ¤í”Œë ˆì´ ë“œë¼ì´ë²„ ì„¤ì •
  static lv_disp_drv_t disp_drv;
  lv_disp_drv_init(&disp_drv);
  disp_drv.hor_res = screenWidth;
  disp_drv.ver_res = screenHeight;
  disp_drv.flush_cb = my_disp_flush;
  disp_drv.draw_buf = &draw_buf;
  lv_disp_drv_register(&disp_drv);

  // ê°„ë‹¨í•œ Hello World ë¼ë²¨
  lv_obj_t *label = lv_label_create(lv_scr_act());
  lv_label_set_text(label, "Hello World");
  lv_obj_align(label, LV_ALIGN_CENTER, 0, 0);  // ê°€ìš´ë° ì •ë ¬
}

void loop() {
  lv_timer_handler();  // LVGL ë‚´ë¶€ ì‘ì—… ì²˜ë¦¬
  delay(5);
}
```
ë²„íŠ¼ ì¶œë ¥ í”„ë¡œê·¸ë¨
```
#include <lvgl.h>
#include <TFT_eSPI.h>

static const uint16_t screenWidth  = 480;
static const uint16_t screenHeight = 320;

static lv_disp_draw_buf_t draw_buf;
static lv_color_t buf[screenWidth * screenHeight / 10];

TFT_eSPI tft = TFT_eSPI();  // TFT ì¸ìŠ¤í„´ìŠ¤

/* í™”ë©´ ê°±ì‹  ì½œë°± */
void my_disp_flush(lv_disp_drv_t *disp, const lv_area_t *area, lv_color_t *color_p) {
  uint32_t w = area->x2 - area->x1 + 1;
  uint32_t h = area->y2 - area->y1 + 1;

  tft.startWrite();
  tft.setAddrWindow(area->x1, area->y1, w, h);
  tft.pushColors((uint16_t *)&color_p->full, w * h, true);
  tft.endWrite();

  lv_disp_flush_ready(disp);
}

/* ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ */
void btn_event_cb(lv_event_t *e) {
  lv_obj_t *btn = lv_event_get_target(e);
  const char *txt = lv_label_get_text(lv_obj_get_child(btn, 0));
  Serial.print("Button pressed: ");
  Serial.println(txt);
}

void setup() {
  Serial.begin(115200);
  lv_init();
  tft.begin();
  tft.setRotation(3);  // í•„ìš” ì‹œ íšŒì „ ë³€ê²½

  lv_disp_draw_buf_init(&draw_buf, buf, NULL, screenWidth * screenHeight / 10);

  static lv_disp_drv_t disp_drv;
  lv_disp_drv_init(&disp_drv);
  disp_drv.hor_res = screenWidth;
  disp_drv.ver_res = screenHeight;
  disp_drv.flush_cb = my_disp_flush;
  disp_drv.draw_buf = &draw_buf;
  lv_disp_drv_register(&disp_drv);

  // ë²„íŠ¼ ìƒì„± (ì„¸ë¡œ ì •ë ¬)
  lv_obj_t *btn_up = lv_btn_create(lv_scr_act());
  lv_obj_align(btn_up, LV_ALIGN_CENTER, 0, -60);
  lv_obj_add_event_cb(btn_up, btn_event_cb, LV_EVENT_CLICKED, NULL);
  lv_obj_t *label_up = lv_label_create(btn_up);
  lv_label_set_text(label_up, "up");

  lv_obj_t *btn_stop = lv_btn_create(lv_scr_act());
  lv_obj_align(btn_stop, LV_ALIGN_CENTER, 0, 0);
  lv_obj_add_event_cb(btn_stop, btn_event_cb, LV_EVENT_CLICKED, NULL);
  lv_obj_t *label_stop = lv_label_create(btn_stop);
  lv_label_set_text(label_stop, "stop");

  lv_obj_t *btn_down = lv_btn_create(lv_scr_act());
  lv_obj_align(btn_down, LV_ALIGN_CENTER, 0, 60);
  lv_obj_add_event_cb(btn_down, btn_event_cb, LV_EVENT_CLICKED, NULL);
  lv_obj_t *label_down = lv_label_create(btn_down);
  lv_label_set_text(label_down, "down");
}

void loop() {
  lv_timer_handler();
  delay(5);
}
```

# I2C í†µì‹  í”„ë¡œê·¸ë¨
ë§ˆìŠ¤í„° í”„ë¡œê·¸ë¨ : í„°ì¹˜ìŠ¤í¬ë¦° RP2040
```
#include <Wire.h>

#define I2C_ADDR 0x08  // ESP32 ìŠ¬ë ˆì´ë¸Œ ì£¼ì†Œ
#define SDA_PIN 20     // I2C SDA í•€
#define SCL_PIN 21     // I2C SCL í•€

void setup() {
  Wire.setSDA(SDA_PIN);
  Wire.setSCL(SCL_PIN);
  Wire.begin();  // I2C ë§ˆìŠ¤í„° ì‹œì‘
  Serial.begin(115200);
  delay(1000);
  Serial.println("I2C Master ì‹œì‘");
}

void sendCommand(const String& cmd) {
  Wire.beginTransmission(I2C_ADDR);
  Wire.write(cmd.c_str());
  Wire.endTransmission();
  Serial.println("ì „ì†¡: " + cmd);
}

void loop() {
  sendCommand("{\"cmd\":\"on\"}");
  delay(3000);

  sendCommand("{\"cmd\":\"off\"}");
  delay(3000);
}
```

ìŠ¬ë ˆì´ë¸Œ í”„ë¡œê·¸ë¨ : IoT PLC ESP32
```
#include <Wire.h>

#define SLAVE_ADDR 0x08
#define SDA_PIN 16
#define SCL_PIN 17

String received = "";

void receiveEvent(int howMany) {
  char c;
  received = "";
  while (Wire.available()) {
    c = Wire.read();
    received += c;
  }
  Serial.println("ìˆ˜ì‹ ëœ ë°ì´í„°: " + received);
}

void setup() {
  Serial.begin(115200);
  delay(500);
  Serial.println("I2C Slave ì‹œì‘");

  // ìŠ¬ë ˆì´ë¸Œ ëª¨ë“œë¡œ SDA/SCL í•€ ì§€ì •
  Wire.begin(SLAVE_ADDR, SDA_PIN, SCL_PIN, 100000);
  Wire.onReceive(receiveEvent);
}

void loop() {
  // ìŠ¬ë ˆì´ë¸ŒëŠ” ì´ë²¤íŠ¸ ê¸°ë°˜ì´ë¯€ë¡œ loopëŠ” ë¹„ì›Œë‘ 
}
```
